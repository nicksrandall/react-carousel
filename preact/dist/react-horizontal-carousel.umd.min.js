!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("preact")):"function"==typeof define&&define.amd?define(["preact"],e):t.ReactHorizontalCarousel=e(t.preact)}(this,function(t){"use strict";function e(){}function n(t,e){return!(t=Array.isArray(t)?t[0]:t)&&e?e:t}function o(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];e.forEach(function(e){e&&e.apply(void 0,[t].concat(o))})}}t=t&&t.hasOwnProperty("default")?t.default:t;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},s=function(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},d=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},u="object"===("undefined"==typeof performance?"undefined":i(performance))&&performance.now?performance:Date,c=function(t){function i(e){r(this,i);var n=d(this,t.call(this,e));return n.calculateSizes=function(){n.setState({windowWidth:n._windowRef.offsetWidth,trackWidth:3*n._windowRef.offsetWidth})},n.play=function(){n.state.focused&&(n.timeout=setTimeout(function(){n.goToSlide(n.nextIndex(n.state.currentIndex))},n.props.slideDuration))},n.pause=function(){clearTimeout(n.timeout)},n.resize=function(){n.running||(n.running=!0,window.requestAnimationFrame(function(){n.calculateSizes(),n.running=!1}))},n.handleVisibilityChange=function(){n.setState({focused:!document.hidden},function(){document.hidden?n.pause():n.props.autoPlay&&n.play()})},n.keydown=function(t){37===t.keyCode&&n.goToSlide(n.prevIndex(n.state.currentIndex),!0),39===t.keyCode&&n.goToSlide(n.nextIndex(n.state.currentIndex),!0)},n.commitUpdate=function(){n.setState({finalPrevIndex:n.state.prevIndex,finalCurrentIndex:n.state.currentIndex,finalNextIndex:n.state.nextIndex})},n.goToSlide=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.pause(),n.now=u.now();var o=1;t===n.props.slideCount-1?o=0===n.state.currentIndex?0:2:0===t?o=n.state.currentIndex===n.props.slideCount-1?2:0:t>n.state.currentIndex?o=2:t<n.state.currentIndex&&(o=0);var i=Math.abs(n.state.windowWidth+n.state.dragOffset-n.state.windowWidth*o)*n.props.animationDuration/n.state.windowWidth;n.props.animationDuration<=0&&n.commitUpdate();var r=n.prevIndex(t),a=n.nextIndex(t);if(e)switch(o){case 0:n.setState({finalPrevIndex:t});break;case 2:n.setState({finalNextIndex:t})}n.setState({transitionDirection:o,animationMS:i,prevIndex:r,currentIndex:t,nextIndex:a},function(){n.props.autoPlay&&n.play()})},n.prevIndex=function(t){return t>0?t-1:n.props.slideCount-1},n.nextIndex=function(t){return t<n.props.slideCount-1?t+1:0},n.getRootProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=s(t,[]);return a({},e)},n.windowRef=function(t){return n._windowRef=t},n.getWindowProps=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.refKey,i=void 0===o?"ref":o,r=s(e,["refKey"]);return a(((t={})[i]=n.windowRef,t),r)},n.trackRef=function(t){return n._trackRef=t},n.track_handleTransitionEnd=function(){n.commitUpdate(),n.setState({animationMS:0,transitionDirection:1})},n.getTrackProps=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.refKey,r=void 0===i?"ref":i,d=e.onTransitionEnd,u=e.style,c=s(e,["refKey","onTransitionEnd","style"]);return a(((t={})[r]=n.trackRef,t.style=a({},u,{width:n.state.trackWidth,transition:n.state.animationMS>0?"transform "+(1===n.state.transitionDirection?2*n.state.animationMS:n.state.animationMS)+"ms "+(1===n.state.transitionDirection?"cubic-bezier(0.68, -0.55, 0.265, 1.55)":"ease-out"):null,transform:"translate3d(-"+(n.state.windowWidth*n.state.transitionDirection+n.state.dragOffset)+"px, 0px, 0px)"}),t.onTransitionEnd=o(d,n.track_handleTransitionEnd),t),c)},n.slide_handleSwipeStart=function(t){var e=void 0!==t.touches?t.touches[0].pageX:t.clientX;n.setState({dragging:!0,touchObject:{startX:e,curX:e}})},n.slide_handleSwipeMove=function(t){var e=n.state.touchObject;e.curX=t.touches?t.touches[0].pageX:t.clientX;var o=Math.round(Math.sqrt(Math.pow(e.curX-e.startX,2)))*(e.curX>e.startX?-1:1);n.setState({dragOffset:o,touchObject:e})},n.slide_handleSwipeEnd=function(){n.state.dragOffset>(n.state.windowWidth>1280?250:100)?n.goToSlide(n.nextIndex(n.state.currentIndex)):n.state.dragOffset<(n.state.windowWidth>1280?-250:-100)?n.goToSlide(n.prevIndex(n.state.currentIndex)):0!==n.state.dragOffset&&n.goToSlide(n.state.currentIndex),n.setState({dragging:!1,dragOffset:0,touchObject:{startX:0,curX:0}})},n.getNextSlideProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.style,o=s(t,["style"]);return a({key:n.state.finalNextIndex,"data-index":n.state.finalNextIndex,style:a({},e,{width:n.state.windowWidth})},o)},n.getCurrentSlideProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onMouseDown,i=t.onMouseMove,r=t.onMouseUp,d=t.onMouseLeave,u=t.onTouchStart,c=t.onTouchMove,l=t.onTouchEnd,f=t.onTouchCancel,p=t.style,h=s(t,["onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","style"]);return a({key:n.state.finalCurrentIndex,"data-index":n.state.finalCurrentIndex,onTouchStart:o(n.slide_handleSwipeStart,u),onTouchMove:o(n.state.dragging?n.slide_handleSwipeMove:null,c),onTouchEnd:o(n.slide_handleSwipeEnd,l),onTouchCancel:o(n.state.dragging?n.slide_handleSwipeEnd:null,f),onMouseDown:o(n.slide_handleSwipeStart,e),onMouseMove:o(n.state.dragging?n.slide_handleSwipeMove:null,i),onMouseUp:o(n.slide_handleSwipeEnd,r),onMouseLeave:o(n.state.dragging?n.slide_handleSwipeEnd:null,d),style:a({},p,{width:n.state.windowWidth})},h)},n.getPrevSlideProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.style,o=s(t,["style"]);return a({key:n.state.finalPrevIndex,"data-index":n.state.finalPrevIndex,style:a({},e,{width:n.state.windowWidth})},o)},n.prevButton_handleClick=function(){n.goToSlide(n.prevIndex(n.state.currentIndex))},n.getPrevButtonProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onClick,i=s(t,["onClick"]);return a({type:"button","data-role":"none",onClick:o(e,n.prevButton_handleClick)},i)},n.nextButton_handleClick=function(){n.goToSlide(n.nextIndex(n.state.currentIndex))},n.getNextButtonProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onClick,i=s(t,["onClick"]);return a({type:"button","data-role":"none",onClick:o(e,n.nextButton_handleClick)},i)},n.getIndicatorListProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=s(t,[]);return a({},e)},n.indicator_makeHandleClick=function(t){return function(){n.goToSlide(t,!0)}},n.getIndicatorProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onClick,i=t.index,r=s(t,["onClick","index"]);return a({tabindex:i===n.state.currentIndex?"-1":null,onClick:o(e,n.indicator_makeHandleClick(i))},r)},n.state={focused:!0,prevIndex:n.props.slideCount-1,currentIndex:0,nextIndex:1,finalPrevIndex:n.props.slideCount-1,finalCurrentIndex:0,finalNextIndex:1,windowWidth:0,trackWidth:0,dragOffset:0,transitionDirection:1},n.running=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,t),i.prototype.componentDidMount=function(){this.calculateSizes(),window.addEventListener("resize",this.resize,!1),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1),document.addEventListener("keydown",this.keydown,!1),this.props.autoPlay&&(this.now=u.now(),this.play())},i.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.resize,!1),document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1),document.removeEventListener("keydown",this.keydown,!1)},i.prototype.getStateAndHelpers=function(){return{getRootProps:this.getRootProps,getWindowProps:this.getWindowProps,getTrackProps:this.getTrackProps,getPrevSlideProps:this.getPrevSlideProps,getCurrentSlideProps:this.getCurrentSlideProps,getNextSlideProps:this.getNextSlideProps,getPrevButtonProps:this.getPrevButtonProps,getNextButtonProps:this.getNextButtonProps,getIndicatorListProps:this.getIndicatorListProps,getIndicatorProps:this.getIndicatorProps,goToSlide:this.goToSlide,getNextIndex:this.nextIndex,getPrevIndex:this.prevIndex,dragOffset:this.state.dragOffset,slideCount:this.props.slideCount,finalPrevIndex:this.state.finalPrevIndex,finalCurrentIndex:this.state.finalCurrentIndex,finalNextIndex:this.state.finalNextIndex,prevIndex:this.state.prevIndex,currentIndex:this.state.currentIndex,nextIndex:this.state.nextIndex,startTime:this.now}},i.prototype.render=function(){var t=n(n(this.props.render||this.props.children,e)(this.getStateAndHelpers()));return t||null},i}(t.Component);return c.defaultProps={animationDuration:250,slideDuration:0,calculateWidth:function(t){return t._windowRef.offsetWidth},dynamicSizes:!1,autoPlay:!0},c.default=c,c});
//# sourceMappingURL=react-horizontal-carousel.umd.min.js.map
